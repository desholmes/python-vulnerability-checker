# Python Dependency Vulnerability Checker

This repo uses the [Skjold](https://pypi.org/project/skjold/) package to check the dependencies for a project against the following advisory sources:

* [GitHub Advisory Database](https://github.com/advisories)
* [PyUP.io safety-db](https://github.com/pyupio/safety-db)
* [GitLab gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db)

## Docker Image Details

[hub.docker.com/repository/docker/desholmes/python-vulnerability-checker](https://hub.docker.com/repository/docker/desholmes/python-vulnerability-checker).

* Registry: desholmes
* Repository name: python-vulnerability-checker
* Current version: 1.0.1

## Usage

1. Run `make setup`: to copy `.env` into place (`.env-dist` > `.env`)
1. Generate a [GitHub personal access token](https://github.com/settings/tokens) and replace `<GITHUB_TOKEN>` in `.env`
1. Replace the paths below:
    1. `<requirements path>`: Path to the requirements file
    1. `<reports path>`: Path to the where the `skjold-report.json` report file should be saved

```bash
docker run --rm -it \
    -e GITHUB_TOKEN=$(GITHUB_TOKEN) \
    -v <requirements path>/requirements.txt:/usr/src/app/requirements.txt \
    -v <reports path>/skjold-report.json:/usr/src/app/skjold-report.json \
    desholmes/python-vulnerability-checker:1.0.0
```

## Getting Started

### Prerequisites

1. Installation of [Docker CE](https://store.docker.com/search?type=edition&offering=community)
1. A working knowledge of [git SCM](https://git-scm.com/downloads)
1. Installation of [Python 3.7.3](https://www.python.org/downloads/)

## Docker

### Building

1. Complete the 'Getting Started > Prerequisites' section
1. Run `make setup`: to copy `.env` into place (`.env-dist` > `.env`)
1. Generate a [GitHub personal access token](https://github.com/settings/tokens) with `public access` permissions and replace `<GITHUB_TOKEN>` in `.env`
1. Run `make build` to create the docker image based on the details of the `Docker Image Details` section above

### Running

1. Complete the 'Docker > Building' section
1. Run `make run-pass` to the docker container using the contents of the `./test_pass_project`
1. Note: The output from the above commands shows a `No vulnerable packages found!` message and exits with a 0
1. Run `make run-fail` to the docker container using the contents of the `./test_fail_project`
1. Note: The output from the above commands shows a `Found 2 vulnerable packages!` message and exits with a 1
1. Note: The [./test_fail_project/skjold-report.json](./test_pass_project/skjold-report.json) has been updated

## Version History

1. `1.0.1`: Added docker hub link to docs
1. `1.0.0`: Base repo
